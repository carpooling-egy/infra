events {}

# Single stream block containing both load balancer definitions
stream {
    # Car Load Balancer
    upstream osrm_car {
        server 20.46.49.38:5000 max_fails=3 fail_timeout=30s;
        # you can add more servers here if needed
    }

    server {
        listen 5000;
        proxy_pass osrm_car;
        proxy_timeout 10s;
        proxy_connect_timeout 5s;
    }

    # Foot Load Balancer
    upstream osrm_foot {
        server 20.46.49.38:5001 max_fails=3 fail_timeout=30s;
        # you can add more servers here if needed
    }

    server {
        listen 5001;
        proxy_pass osrm_foot;
        proxy_timeout 10s;
        proxy_connect_timeout 5s;
    }
}

